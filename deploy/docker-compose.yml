services:
  bot:
    build:
      context: ..
      dockerfile: deploy/Dockerfile
      args:
        APP_USER: ${APP_USER:-sumarokov}
    container_name: personal_assistant_bot
    network_mode: host
    env_file:
      - ../.env
    restart: unless-stopped
    volumes:
      - ${HOME}/.claude:${APP_HOME:-/home/sumarokov}/.claude
      - ${HOME}/pyinfra_dotfiles/dotfiles/claude:${APP_HOME:-/home/sumarokov}/pyinfra_dotfiles/dotfiles/claude
      - ${HOME}/obsidian_wiki:${APP_HOME:-/home/sumarokov}/obsidian_wiki
      - ${HOME}/.ssh/personal_assistant:${APP_HOME:-/home/sumarokov}/.ssh/personal_assistant:ro
      - ${HOME}/.ssh/personal_assistant.pub:${APP_HOME:-/home/sumarokov}/.ssh/personal_assistant.pub:ro
